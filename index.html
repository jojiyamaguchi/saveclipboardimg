<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <style>
      .paste-box {
        background : rgb(0,200,0);
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div id="canvas_div">
        <div id="cdiv">
          <div id="box" contenteditable="true">
            ペースト
          </div>
          <canvas width="80%" height="60%" id="mycanvas"></canvas>
        </div>
      </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.js"></script>
    <script>

      $(function(){
        $('#box').on( "paste", function( e ){
          imagePaste( e );
          return false;
        });
      
        function imagePaste( event ){
        var blobimg = null;
        var items = ( event.clipboardData || event.originalEvent.clipboardData ).items;
        for( var i = 0; i < items.length; i ++ ){
          if( items[i].type.indexOf( "image" ) == 0 ){
            blobimg = items[i].getAsFile();
          }
        }
      
        if( blobimg != null ){
          var bloburl = URL.createObjectURL( blobimg );
      
          var canvas = document.getElementById( "mycanvas" );
          var ctx = canvas.getContext( '2d' );
      
          var img = new Image();
          img.src = bloburl;
          img.onload = function(){
            var sw = img.naturalWidth;
            var sh = img.naturalHeight;
            var dw = canvas.width;
            var dh = canvas.height;
            ctx.drawImage( img, 0, 0, sw, sh, 0, 0, dw, dh );
          };
        }
      }
    </script>
  </body>
</html>
